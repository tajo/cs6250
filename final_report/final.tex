\documentclass[conference]{IEEEtran}
\usepackage[numbers,sort]{natbib}

\ifCLASSINFOpdf
  % \usepackage[pdftex]{graphicx}
  % declare the path(s) where your graphic files are
  % \graphicspath{{../pdf/}{../jpeg/}}
  % and their extensions so you won't have to specify these with
  % every instance of \includegraphics
  % \DeclareGraphicsExtensions{.pdf,.jpeg,.png}
\else
  % or other class option (dvipsone, dvipdf, if not using dvips). graphicx
  % will default to the driver specified in the system graphics.cfg if no
  % driver is specified.
  % \usepackage[dvips]{graphicx}
  % declare the path(s) where your graphic files are
  % \graphicspath{{../eps/}}
  % and their extensions so you won't have to specify these with
  % every instance of \includegraphics
  % \DeclareGraphicsExtensions{.eps}
\fi

% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor}

\usepackage{pdfpages}

\begin{document}
%
% paper title
% can use linebreaks \\ within to get better formatting as desired
% Do not put math or special symbols in the title.
\title{Opportunistic Network Simulation}

% author names and affiliations
% use a multiple column layout for up to three different
% affiliations
\author{
\IEEEauthorblockN{Vojtech Miksu, Nils Gustav Davidsson, Drew Carrington, Jiayu Chen, Anjjan Narayan}
\IEEEauthorblockA{College of Computing\\
Georgia Institute of Technology\\
Atlanta, Georgia 30332\\
Email: \{miksu, gustav, dcarrington3, jychen, anjjan.narayan\}@gatech.edu}
}

% make the title area
\maketitle

% As a general rule, do not put math, special symbols or citations
% in the abstract
\begin{abstract}
Cross Block Chaining (XBC) is a mode of operation for a block cipher. It resembles one of the most used modes - Cipher Block Chaining (CBC). However, it operates using two IVs instead of one, which introduces new capabilities but also raises security concerns. Our work focuses on a detailed security analysis of the Cross Block Chaining mode. We show a proof for XBC being IND-CPA secure and IND-CCA insecure. We also discuss importance of initialization vector selection and its consequences on the scheme security.
\end{abstract}

% As a general rule, do not put math, special symbols or citations
% in the abstract
\begin{keywords}
The ONE; opportunistic networks; routing
\end{keywords}

% For peerreview papers, this IEEEtran command inserts a page break and
% creates the second title. It will be ignored for other modes.
\IEEEpeerreviewmaketitle

\section{Introduction}
% no \IEEEPARstart

With the increasing use of mobile devices such as smartphones, tablets and laptop computers that are connected wirelessly to a network, there arises a potential to use ad-hoc networks. Ad-hoc networks are the only option for some applications where various challenges such as intermittent connectivity and variable performance arise. In most cases these networks do not contain a path from source to destination.

Opportunistic network provides the perfect platform to improve the usability and connectivity of mobile devices that are on the go. Our work primarily focuses on opportunistic network protocols. As a part of our work, we compare the different protocols, their parameterization and ultimately come up with our proposal and implementation of enhancement to the protocols. During the study, we use The Opportunistic Networks Environment (The ONE) simulator \cite{keranen-theone} that was created at Helsinki University of Technology.

The ONE is a complex tool that enables a real-time simulation of delay-tolerant networks. It implements various existing protocols and provides an interface to create and test new ones. It is also possible to use different map backgrounds since opportunistic networks are heavily related to a real-world routes. We use a map of Georgia Tech in Atlanta.

% An example of a floating figure using the graphicx package.
% Note that \label must occur AFTER (or within) \caption.
% For figures, \caption should occur after the \includegraphics.
% Note that IEEEtran v1.7 and later has special internal code that
% is designed to preserve the operation of \label within \caption
% even when the captionsoff option is in effect. However, because
% of issues like this, it may be the safest practice to put all your
% \label just after \caption rather than within \caption{}.
%
% Reminder: the "draftcls" or "draftclsnofoot", not "draft", class
% option should be used if it is desired that the figures are to be
% displayed while in draft mode.
%
%\begin{figure}[!t]
%\centering
%\includegraphics[width=2.5in]{myfigure}
% where an .eps filename suffix will be assumed under latex,
% and a .pdf suffix will be assumed for pdflatex; or what has been declared
% via \DeclareGraphicsExtensions.
%\caption{Simulation Results.}
%\label{fig_sim}
%\end{figure}

% Note that IEEE typically puts floats only at the top, even when this
% results in a large percentage of a column being occupied by floats.

% An example of a double column floating figure using two subfigures.
% (The subfig.sty package must be loaded for this to work.)
% The subfigure \label commands are set within each subfloat command,
% and the \label for the overall figure must come after \caption.
% \hfil is used as a separator to get equal spacing.
% Watch out that the combined width of all the subfigures on a
% line do not exceed the text width or a line break will occur.
%
%\begin{figure*}[!t]
%\centering
%\subfloat[Case I]{\includegraphics[width=2.5in]{box}%
%\label{fig_first_case}}
%\hfil
%\subfloat[Case II]{\includegraphics[width=2.5in]{box}%
%\label{fig_second_case}}
%\caption{Simulation results.}
%\label{fig_sim}
%\end{figure*}
%
% Note that often IEEE papers with subfigures do not employ subfigure
% captions (using the optional argument to \subfloat[]), but instead will
% reference/describe all of them (a), (b), etc., within the main caption.

\section{Opportunistic networks}

In order to avoid the costly process of introducing cables into a building, or as a connection between various equipment locations, personal devices, telecommunication networks and business installations are moving to wireless networks. The devices such as smartphones, tablets and laptops are in constant movement from one location to another. There is no solid infrastructure or protocols that can manage this transition of devices from one location to another.

During the last few years, ad hoc networks have been studied extensively and implemented on various application environments. As the application environments of these networks keep increasing, their traditional techniques and approaches need some improvements. One of the recent evolution in ad hoc networks is Mobile ad hoc networks (MANETs). Ad hoc networks also helps mobile nodes to reach infrastructure when some node in the network acts as a gateway. However, if the density of the nodes increases or the connection of a node in the network breaks, traditional network protocols would not be able to provide means for connection establishment and communication.

Wireless network properties such as disconnection of nodes, mobility of users, and link instability cannot be handled in traditional networks. Opportunistic networks are created for mobile devices without relying on pre-existing topology. Opportunistic networks are the evolution of MANETs. In opportunistic networks, mobile nodes can communicate with each other even if a route connecting them doesn’t exist. Opportunistic networks consists of a variety of applications. Some of the applications include opportunistic computing, mobile data offloading, recommender systems etc. Opportunistic networks are created out of mobile devices carried by people, without relying on any existing network topology. In opportunistic network mobility is used as a technique to provide communication between disconnected nodes, rather than a drawback to be solved. Opportunistic networks can be useful for emergency broadcasts, vehicle-to-vehicle communication.


\section{The one simulator}

For the project, we are mainly working with the Opportunistic Network Simulator (ONE). ONE is an event simulation engine which is used to model node movement, inter-node connections using various interfaces, routing, message handling and application interactions. The simulator also provides tools for visualization, reports and post-processing tools.

Node movement is implemented using movement models which are either synthetic or movement traces. Nodes are connected based on their location, communication-range or bit-rate. The routing models decide which messages to forward over the existing connections. The messages are generated either through event generators (to generate random traffic between nodes) or through applications that generate traffic based on application interactions.

\subsection{Measurement and logging support}

Jag gillar OST.

\section{Background map}

The ONE simulator uses wkt format known as well-known text. It is a simple format for representing vector geometry objects. It is used for roads, buildings, routes and points of interest. The key piece of our simulation is a real world background map. The default option was a map of Helsinki. We have replaced it with a map of the Georgia Tech campus in Atlanta.

\subsection{Map pre-processing}

\begin{itemize}
  \item The original map is exported from Open Street Map.
  \item Open Street Map uses its own format; therefore, we used osm2wkt conversion tool to get the wkt format.
  \item The map converted by osm2wkt contains some undesirable layers and objects; another tool, OpenJUMP, was used for the final clean-up.
  \item The world size defined by ONE configuration was updated to width 2200 meters and height 1600 meters in order to get proper scaling.
\end{itemize}

\subsection{Bus route}

\begin{itemize}
  \item To make our simulation more interesting we decided to introduce a special group of nodes - buses.
  \item We focused on the GT red line bus since it’s the only one that stays in bounds of our campus and its route is similar to other lines.
  \item The program OpenJUMP was used for the route selection.
  \item Unfortunately, it exported out many fragmented routes that had to be connected by hand, so the bus can go in one and circular way
\end{itemize}

\section{Networking hardware}

We specify 3 different network interfaces that can be used by nodes in our models. They all assume perfect circular transmission range.

\begin{itemize}
  \item Bluetooth 4.0: Speed = 750kB/s, range = 30 meters.
  \item Wifi direct: Speed = 7.5MB/s, range = 50 meters.
  \item Wifi direct+: Speed = 15 MB/s, range = 100 meters.
\end{itemize}

\section{Performance measurement methodology}

We evaluate different protocols in different situations using a variety of different measurements. Since nodes are mobile and will have a limited energy supply - except maybe buses, if they would use a generator from the engine rather than a battery - we want to consider different energy efficiency metrics.

The ONE simulator has some support for energy measurements in terms of how much energy the networking costs. Specifically, we are able to specify the initial energy level (i.e. battery capacity) and specify costs of transmission, scanning, scan response, and more. We have enabled the ONE to dump the current energy level of all nodes every hour (3600 seconds), and we use a separate script to generate the average energy level for each group of nodes. We will extend this to give other measurements such as used energy, number of nodes that ran out of battery, average (and maybe low, high) battery percentage remaining of nodes. We will use the resulting report to measure the energy efficiency of the different schemes.

The ONE simulator also supports other reports. Many of them are related to message delivery probability, statistics on queue sizes in the nodes, and total contact time (time within range of other nodes). Especially statistics on message delivery and queue sizes are the more straightforward performance measurements that we will compare between different protocols, although energy is also an important aspect in this setting.

\section{Node groups}

Nodes are the vital part of our simulation. They are basic communication units that can send, receive, buffer and route data. They are also subject to specified or stochastic movement with different speeds and directions. Every group of nodes uses a different network interface. We have four different groups with a total of 106 nodes. See the table \ref{node_groups}.

\begin{table}[!t]
\renewcommand{\arraystretch}{1.5}
\caption{Node groups}
\label{node_groups}
\centering
\begin{tabular}{|c||c||c||c||c|}
\hline
 & Visitors & Bikers & Students & Buses\\
\hline
Label & v & b & s & bus\\
\hline
Number & 30 & 20 & 50 & 6\\
\hline
Speed km/h & 0.5 - 1.5 & 2 - 8 & 0.5 - 1.5 & 5\\
\hline
Wait time s & 0 - 300 & 0 - 60 & 0 - 30 & 0\\
\hline
Movement & shortest p. & shortest p. & working day & route\\
\hline
Interface & BT & BT & Wifi direct & Wifi direct+\\
\hline
\end{tabular}
\end{table}

\section{Movement}

The basic movement type in the ONE simulator is ShortestPathMapBasedMovement. For each node, the simulator will randomly pick an end point on the map and move it there by using Dijkstra Shortest Path Algorithm.

In order to simulate the movement of different objects in real life, we decided to use two special movement types -- MapRouteMovement and WorkingDayMovement. They can help us easily control the movement pattern of different groups of nodes.

The MapRouteMovement model enables a group of nodes to follow a certain route which is defined by the user. In our experiment, it is applied to the bus group. By doing so, we can simulate the movement of Georgia Tech buses.

The WorkingDayMovement model presents the everyday life of average people that go to work in the morning, spend their day at work, and commute back to their homes in the evening. Some of them might go shopping afterwards.

We define multiple groups of people who work in different buildings and live in different apartments around the campus.

\section{Simulation results}

After running simulations, processing with post-simulation scripts and generating plots, we are able to compare the performance of the aforementioned schemes with respect to energy consumption, message delivery probability, message delivery statistics over time, and more. Let's dive in!

\subsection{Message delivery}

Let us start with the core concerns of protocols, namely whether or not they are good at delivering packets. The two main metrics we use to compare the protocols here is the probability that messages are delivered during the course of the day, and how long packets take to deliver, which we call they delay. Keep in mind that packets are created throughout the day rather than only at the beginning of day.

{\color{red}
  TODO generate delivery message probability chart (the one in the presentation) in PDF format! Then we can insert it here.
}

Above is a comparison of the delivery probability of all messages for the protocols we are considering. We see that Spray and Wait, Epidemic and Propet routing are distinguishing themselves from Direct and FirstContact routing by achieving more than five percentage points higher delivery probability. The difference between Spray and Wait, Epidemic and Prophet routing are only a few percentage points at most, so we would like to consider additional metrics to decide which protocol is better.

{\color{red}
  TODO generate message delivery delay chart (the one in the presentation) in PDF format! Then we can insert it here. Also - should we change from number of packets to the percent of all packets that this scheme delivered? It would maybe be easier to compare distributions in that case. But maybe we should add both, because, why not.
}

Above are the distributions of delivery times, i.e. how long the delay was from creation to delivery of packets. {\color{red}TODO draw conclusions. But it's a bit tricky to see how Prophet/SprayAndWait/Epidemic fare against each other, maybe you guys understand this plot better than I do.}

\subsection{Energy efficiency}

Regarding energy efficiency, the ONE gives us the energy level of every node in a certain interval. In our simulations we have used 1200 second intervals, i.e. every 20 minutes of simulated time. We then process this information to generate statistics by node group over time, such as average energy consumption and average battery percentage remaining. Let us consider the average energy consumption of different node types under the schemes we consider.

\includegraphics[scale=0.38]{../one_1.5.1-RC2/plots/SprayAndWait_AVG_ENERGY_CONSUMPTION.pdf}

Above is the energy consumption over the course of the simulation when we're using the Spray and Wait routing protocol. We see that while the buses have a relatively high energy consumption, the levels are stable for all groups over the whole simulation. Let's consider some other protocols to get an idea of how Spray and Wait compares to the other protocols.

\includegraphics[scale=0.38]{../one_1.5.1-RC2/plots/Epidemic_AVG_ENERGY_CONSUMPTION.pdf}

Above is the average consumption with Epidemic routing. We see higher levels for both visitors and bikers, with occasional peaks in the energy consumption of the students. How come we see these peaks? Let's take a look at the amount of packets that are being sent.

\includegraphics[scale=0.38]{../one_1.5.1-RC2/plots/Epidemic_NUM_DELIVERED_PKTS_IN_WND.pdf}

This graph shows the number of packets sent within the last hour, at any point in time, when Epidemic routing is used. We see some peaks that we can link to the two peaks that we saw in the students' energy consumption! But what about Spray and Wait, why are there no peaks in their energy consumption?

\includegraphics[scale=0.38]{../one_1.5.1-RC2/plots/SprayAndWait_NUM_DELIVERED_PKTS_IN_WND.pdf}

Above is the same statistics for Spray and Wait. We see very similar peaks, in fact, although they seem to deviate slightly less from the average. But given that the energy consumptions are so different, it seems safe to conclude that Spray and Wait is more energy efficient. Let's have a look at the average energy comsumption when Prophet routing is used.

\includegraphics[scale=0.38]{../one_1.5.1-RC2/plots/ProphetRouter_AVG_ENERGY_CONSUMPTION.pdf}

Interestingly enough, the students' energy consumption is flat here, while the visitors have peaks in roughly the same time periods as Epidemic routing had! Even with the peaks, though, the energy consumption of visitors and bikers is on average lower than that of Epidemic routing, and higher than with Spray and Wait. It seems like Spray and Wait and Prophet routing are good protools in our scenario, given that Prophet routing had slightly higher message delivery probability.

Let's compare the energy consumptions with the protocols that struggled more in terms of message delivery probability, namely Direct routing and FirstContact routing.

\includegraphics[scale=0.38]{../one_1.5.1-RC2/plots/Direct_AVG_ENERGY_CONSUMPTION.pdf}

Here we see Direct routing's performance in terms of energy consumption. As it turns out, this is the least energy consuming protocol that we consider - the visitors and bikers are slightly lower than with Spray and Wait.

\includegraphics[scale=0.38]{../one_1.5.1-RC2/plots/FirstContact_AVG_ENERGY_CONSUMPTION.pdf}

Above is the consumption with FirstContact routing. It's lower and more stable than using Epidemic or Prophet routing, but not quite as good as Direct or Spray and Wait routing. Still, this is not a large difference from them by any means, and thus FirstContact is also a protocol that consumes a bit less energy. \\

{\color{red}
  TODO more analysis, else write some conclusions? Maybe as below:
}
From our findings in this section, it seems like Prophet routing and Spray and Wait are the best choices in our scenario. Prophet routing provides slightly higher message delivery probability at a cost of slightly higher and less consistent energy consumption than that of Spray and Wait. Which protocol would be best is simply a matter or what is most important in a given application - slightly longer battery time, or higher probability that a message arrives during the day it was created.

% conference papers do not normally have an appendix

% use section* for acknowledgement
\section*{Acknowledgment}

We would like to show our gratitude to Dr. Mostafa Ammar, Georgia Tech for sharing his pearls of wisdom with us during the Computer Networks course and his guidance received while working on this project.

\bibliographystyle{unsrtnat}
\bibliography{refs}

% that's all folks
\end{document}


